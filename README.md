# ๐ ุณุงูุงูู ุฏุฑุงูุช ุจูุงุฏุฑูฺฏ ุฏุงุฏูโูุง ุฏุณุชฺฏุงูโูุง (SSE + Node.js)

ุงู ูพุฑูฺู ฺฉ REST API ุจุง ุงุณุชูุงุฏู ุงุฒ Node.js ู Express ุจุฑุง ุซุจุชุ ูุฏุฑุช ู ุฏุฑุงูุช ุจูุงุฏุฑูฺฏ ุฏุงุฏูโูุง ุณูุณูุฑูุง ุงุฒ ุทุฑู Server-Sent Events (SSE) ุงุฑุงุฆู ูโุฏูุฏ. ฺฉุงุฑุจุฑุงู ูโุชูุงููุฏ ุซุจุชโูุงู ฺฉููุฏุ ุฏุณุชฺฏุงูโูุง ุฎูุฏ ุฑุง ุงุถุงูู ููุงูุฏุ ุฏุงุฏูโ ุงุฑุณุงู ฺฉููุฏ ู ุงุฒ ุทุฑู SSE ุฏุงุฏูโูุง ุฌุฏุฏ ุฑุง ุจูุงุฏุฑูฺฏ ุฏุฑุงูุช ฺฉููุฏ.

---

## ๐ ุดุฑูุน ุณุฑุน

### ูพุดโูุงุฒูุง
- Node.js v18+
- MySQL (ุจุฑุง ุฐุฎุฑู ุฏุงุฏูโูุง ุฏุณุชฺฏุงู)
- MongoDB (ุฏุฑ ุตูุฑุช ุงุณุชูุงุฏู ุจุฑุง ฺฉุงุฑุจุฑุงู/ุฏุณุชฺฏุงูโูุง - ุงฺฏุฑ ุฏุฑ ูุฏูโูุง Mongo ุงุณุชูุงุฏู ุดุฏู)

### ูุตุจ
<div dir="rtl">
```bash
git clone https://github.com/your-username/your-repo.git
cd your-repo
npm install
ุงุฌุฑุง ูพุฑูฺู
bash
Copy
Edit
# ูุงู .env ุจุณุงุฒุฏ:
cp .env.example config.env

# ุณูพุณ ุณุฑูุฑ ุฑุง ุงุฌุฑุง ฺฉูุฏ:
npm run dev
๐ฆ ุณุงุฎุชุงุฑ ูพุฑูฺู
bash
Copy
Edit

 app.js               # ุชูุธู ุฑูุชโูุง ู ูุฏููุฑูุง
 
server.js            # ุงุฌุฑุง ุณุฑูุฑ ู Polling

 Routes/              # ุชูุงู ุฑูุชโูุง API
 
Controllers/         # ฺฉูุชุฑูุฑูุง ูุฑุจูุท ุจู ฺฉุงุฑุจุฑุงูุ ุฏุณุชฺฏุงูโูุง ู ุฏุงุฏูโูุง

 Middleware/          # ูุฏููุฑูุง ูุงููุฏ ุงุนุชุจุงุฑุณูุฌ ู ุงุญุฑุงุฒ ููุช
 
Models/              # ูุฏูโูุง ุฏุชุงุจุณ (User, Device, DeviceData)

sse.js               # ูุฏุฑุช ุงุชุตุงูโูุง SSE

poller.js            # ุฏุฑุงูุช ุฏุงุฏูโูุง ุฌุฏุฏ ุงุฒ MySQL ูุฑ ฑต ุฏููู

 views/sse-test.html  # ูุงู ุชุณุช SSE ุณูุช ฺฉูุงูุช

๐ก ููุงุท ุฏุณุชุฑุณ (Endpoints)
๐ ุงุญุฑุงุฒ ููุช ฺฉุงุฑุจุฑุงู
ูุณุฑ	ุชูุถุญ

POST /api/users	ุซุจุชโูุงู ฺฉุงุฑุจุฑ

POST /api/users/login	ูุฑูุฏ ู ุฏุฑุงูุช ุชูฺฉู

GET /api/users/:id	ุฏุฑุงูุช ุงุทูุงุนุงุช ฺฉุงุฑุจุฑ (ุจุง ุชูฺฉู)

๐ ูุฏุฑุช ุฏุณุชฺฏุงูโูุง
ูุณุฑ	ุชูุถุญ
GET /api/devices/user/:userId	ุฏุฑุงูุช ูุณุช ุฏุณุชฺฏุงูโูุง ฺฉุงุฑุจุฑ (ูุงุฒููุฏ ุชูฺฉู)


๐ ุฏุงุฏูโูุง ุฏุณุชฺฏุงูโูุง
ูุณุฑ	ุชูุถุญ
POST /api/device-data/	ุงุฑุณุงู ุฏุงุฏูโูุง ุฏุณุชฺฏุงู

GET /api/device-data/device/:deviceId	ุฏุฑุงูุช ุฏุงุฏูโูุง ฺฉ ุฏุณุชฺฏุงู ุฎุงุต

GET /api/device-data/user/:userId	ุฏุฑุงูุช ููู ุฏุงุฏูโูุง ฺฉุงุฑุจุฑ


๐ ุงุชุตุงู ุจูุงุฏุฑูฺฏ ุจุง SSE
ูุณุฑ	ุชูุถุญ
GET /api/sse/:userId	ุงุชุตุงู SSE ุจุฑุง ุฏุฑุงูุช ุฏุงุฏูโูุง ุฒูุฏู (ูุงุฒ ุจู ุชูฺฉู)


๐ ุชุณุช ุงุชุตุงู SSE
ฺฉ ูุงู HTML ุจู ูุงู sse-test.html ุฏุฑ ุฑุดู ุง ุฏุงุฎู ูพูุดู views/ ูุฌูุฏ ุฏุงุฑุฏ. ุงู ูุงู ุฑุง ุฏุฑ ูุฑูุฑฺฏุฑ ุจุงุฒ ฺฉูุฏ ู:

ููุฏุงุฑ userId ู token ุฎูุฏ ุฑุง ูุงุฑุฏ ฺฉูุฏ.

ุฑู "ุงุชุตุงู" ฺฉูฺฉ ฺฉูุฏ.

ูพุงูโูุง ุจูุงุฏุฑูฺฏ ุฑุง ูุดุงูุฏู ฺฉูุฏ.

ุจุฑุง ุฏุณุชุฑุณ ุจู ุงฺฉุซุฑ ูุณุฑูุงุ ุชูฺฉู JWT ุจุงุฏ ุฏุฑ ูุฏุฑ Authorization ูุฑุณุชุงุฏู ุดูุฏ:

makefile
Copy
Edit
Authorization: Bearer <token>
โฑ ูฺฉุงูุฒู Polling ู SSE
ูุฑ ฑต ุฏููู ุฏุงุฏูโูุง ุฌุฏุฏ ุงุฒ ุฏุชุงุจุณ MySQL ูุงฺฉุด ูโุดูุฏ (ุฏุฑ ูุงู poller.js)

ุณูพุณ ุฏุงุฏูโูุง ุจู ฺฉุงุฑุจุฑุงู ูุชุตู ุงุฒ ุทุฑู SSE (sse.js) ุงุฑุณุงู ูโุดูุฏ



ุฑูุฒ ูพุงฺฏุงู ุฏุงุฏู ุฑุง ุฏุงุฎู ฺฉุฏ ูฺฏู ูุฏุงุฑุฏ (ุงุฒ env ุงุณุชูุงุฏู ฺฉูุฏ)

ุจุฑุฑุณ ฺฉูุฏ ฺฉู ฺฉุงุฑุจุฑุงู ููุท ุจู ุฏุงุฏูโูุง ุฎูุฏ ุฏุณุชุฑุณ ุฏุงุฑูุฏ

๐งช ุชุณุช
ุจุฑุง ุชุณุช APIโูุง ูโุชูุงูุฏ ุงุฒ ุงุจุฒุงุฑูุง ุฒุฑ ุงุณุชูุงุฏู ฺฉูุฏ:

Postman / Insomnia

curl/httpie

ูุฑูุฑฺฏุฑ ุจุฑุง ุชุณุช ูุงู HTML

๐ ูุงุณูุณ
MIT

# test1

</div>
